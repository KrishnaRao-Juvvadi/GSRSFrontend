
<div class = "user-container">
<div class = "flex-row spaced">
    <div class = "top-button">
        <button mat-button (click) = "addUser()">Add User</button>
    </div>
    <div class = "top-button">
        <button mat-button (click) = "showAllUsers()">Show All users</button>
      </div>
    <div class = "top-button">
        <mat-form-field>
            <mat-label>Edit user by UserName</mat-label>
           <input matInput [(ngModel)] = 'userID' name ='id' (keydown.enter) = "editUserByName(userID)" />
           <span class = "user-alert">{{alert}}</span>
         </mat-form-field>
    </div>
    
</div>
<div class = "responsive" *ngIf = "loading === true">
    <div class = "loading-container" >
        <mat-progress-spinner
          class="spinner"
          [color]="primary"
          mode = "indeterminate">
      </mat-progress-spinner>
      </div>
</div>


<div class = "responsive" *ngIf = "loading === false && showAll === true">

  <div class = "form-row">
      <div class = "top-button">
          <button mat-button (click) = "showInactiveUsers()">{{showInactive? 'Hide':'Show'}} Inactive Users</button>
        </div>
  </div>
<table mat-table [dataSource] = "filtered"  matSort (matSortChange)="sortData($event)">
    <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef  mat-sort-header> User Name</th>
        <td mat-cell *matCellDef="let user; index as index">
          <a class = "mat-button" matTooltip = "select to edit" (click) = "editUser(user.user.username, index)">
            {{user.user.username}}
          </a>
        </td>
      </ng-container>
      <ng-container matColumnDef="active">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Active</th>
        <td mat-cell *matCellDef="let user; index as index"> {{user.active}}</td>
      </ng-container>
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email</th>
        <td mat-cell *matCellDef="let user"> {{user.user.email}} </td>
      </ng-container>
      <ng-container matColumnDef="created">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Created</th>
        <td mat-cell *matCellDef="let user"> {{user.user.created | date:'medium'}} </td>
      </ng-container>
      <ng-container matColumnDef="modified">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Modified</th>
        <td mat-cell *matCellDef="let user"> {{user.user.modified | date:'medium'}} </td>
      </ng-container>
      <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Delete</th>
        <td mat-cell *matCellDef="let user; index as index"> 
            <button mat-icon-button (click)="deleteUser(user.user.username, index)" >
                <mat-icon svgIcon="delete_forever"></mat-icon>
              </button>  
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
</div>

</div>