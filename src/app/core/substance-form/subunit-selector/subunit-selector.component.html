<div *ngIf = "card !== 'feature'">
  Sites:
  <div *ngIf = "card !== 'disulfide'">
  <input [ngModel] = "sitesDisplay" class = "sites-input" (ngModelChange)="manualInput($event)" [ngClass]="valid ? 'valid':'invalid'">
  </div>
  <div *ngIf = "card === 'disulfide'" class = 'disulfide-form'>
      <input [ngModel] = "sitesDisplay" class = "sites-input disulfide-display">

    <div class = 'clear-button'>
      <button mat-icon-button matTooltip="Clear Selection"  (click) = "clearSites()">
        <mat-icon svgIcon="clear"></mat-icon>
      </button>
    </div>
    </div>
</div>
<div *ngIf = "card == 'feature'" >
  <div class="form-row-feature">
  <mat-form-field class="name-type mat-form-field">
    <mat-label>Name</mat-label>
  <input matInput class = "sites-input" [(ngModel)] = 'featureName' (change)="emitUpdate()" placeholder="Name" name ="name">
  </mat-form-field>
<div class = "key-value-pair">
  <div class="key">
    Site Range
  </div>
<div class = 'value'>
  <span *ngFor = "let feat of newFeatureArray;index as index" class = 'link-cont'>
    <a (click) = "deleteFeature(feat)" class ='featlink' matTooltip = "Delete sequence section">
        {{feat[0].subunitIndex}}_{{feat[0].residueIndex}}-{{feat[1].subunitIndex}}_{{feat[1].residueIndex}};
      </a>
  </span>
  <span class="bold">
    <span *ngIf = "newFeature[0]">
        {{newFeature[0].subunitIndex}}_{{newFeature[0].residueIndex}} -
      </span>
    <span *ngIf = "newFeature[1]">
        {{newFeature[1].subunitIndex}}_{{newFeature[1].residueIndex}}
      </span>
  </span>
</div>
  <div class = 'clear-button'>
    <button mat-icon-button matTooltip="Clear Current Selection"  (click) = "removeFeature()">
      <mat-icon svgIcon="clear"></mat-icon>
    </button>
  </div>

</div>


  </div>
  <div class="form-row-2">
    <div class = "feature-step">
      <span *ngIf = "selectState == 'first'">Select Starting Site</span>
      <span *ngIf = "selectState == 'last'">Select Ending Site</span>
      <span *ngIf = "selectState == 'finished' && (featureName === '' || featureName === null)">Enter a Feature Name </span>
      <span *ngIf = "selectState == 'finished'">Click a new site to add an additional range</span>
    </div>
  </div>

</div>
 <!-- <div class="subunit-sequence" *ngFor="let subunitSequence of subunitSequences">
  <h4>Subunit {{subunitSequence.subunitIndex}}</h4>
  <div class="responsive">
    <div class="sequence-section-group" *ngFor="let sequencesSectionGroup of subunitSequence.sequencesSectionGroups">
      <div class="sequence-section" *ngFor="let sequencesSectionGroup of sequencesSectionGroup.sequenceSections">
        <div class="section-number">{{sequencesSectionGroup.sectionNumber}}</div>
        <div class="section-units-container">
            <span class="section-unit" *ngFor="let sectionUnit of sequencesSectionGroup.sectionUnits" [matTooltip]="getTooltipMessage(subunitSequence.subunitIndex, sectionUnit.unitIndex, sectionUnit.unitValue, sectionUnit.class? sectionUnit.class : '')">
              <a class = "selectedSite" [ngClass]="sectionUnit.class" (click) = "toggleSite(subunitSequence.subunitIndex, sectionUnit.unitIndex, sectionUnit.unitValue, $event)">{{sectionUnit.unitValue}}</a>
            </span>
        </div>
      </div>
    </div>
  </div>
</div>-->
<div class="subunit-sequence" *ngFor="let sequence of testSequences">
  <h4>Subunit {{sequence.subunitIndex}}</h4>
  <div class="responsive">
      <div *ngFor = "let set of sequence.subsections"  class="sequence-section-group">
        <div *ngFor = "let num of set" class= "sequence-section">
          <div class = "section-number">{{num[1]}}</div>
          <div class = section-units-container>
          <span *ngFor = "let subunit of sequence.subunits.slice(num[0],num[1])"  class="section-unit" >
              <a class = "selectedSite siteref"  [ngClass]="subunit.class" [@errorFlash] (click) = "toggleSite(sequence.subunitIndex, subunit.unitIndex, subunit.unitValue, $event)">{{subunit.unitValue}}</a>
        </span>
          </div>
        </div>
      </div>
  </div>
</div>

