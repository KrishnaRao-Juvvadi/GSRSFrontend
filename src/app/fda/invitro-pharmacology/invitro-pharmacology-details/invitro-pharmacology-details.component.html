<br>
<div *ngIf="assayScreening">
  <div *ngIf="assayScreening.id; else noRecord">
    <div class="details-container margintop90px">

      <mat-card class="bordergray">
        <mat-card-title>
          <div class="width650px margintop10px">
            In-vitro Pharmacology Assay Screening&nbsp;&nbsp;

            <!-- Edit GSRS record button -->
            <a [routerLink]="['/invitro-pharm', assayScreening.id, 'edit']" target="_blank" *ngIf="isAdmin"
              matTooltip='Edit GSRS In-vitro Pharmacology Record'>
              <mat-icon svgIcon="edit"></mat-icon>
            </a>&nbsp;&nbsp;

            <a color="primary" [href]="downloadJsonHref" (click)="saveJSON()" download="{{jsonFileName}}.json"
              matTooltip='Export Json'>
              <mat-icon svgIcon="get_app"></mat-icon>
            </a>&nbsp;&nbsp;&nbsp;
          </div>

          <div class="width50percent font11px margintop10px">
            <span class="colorgray">Created By:</span> {{assayScreening.createdBy}}&nbsp;&nbsp;&nbsp;
            <span class="colorgray">Create
              Date:</span>{{assayScreening.creationDate|date: 'MM/dd/yyyy hh:mm:ss a'}}&nbsp;&nbsp;&nbsp;
            <span class="colorgray">Modified By:</span> {{assayScreening.modifiedBy}}&nbsp;&nbsp;&nbsp;
            <span class="colorgray">Modify Date:</span> {{assayScreening.lastModifiedDate|date: 'MM/dd/yyyy hh:mm:ss
            a'}}
          </div>
        </mat-card-title>

        <mat-card-content>

          <!-- GENERAL INFORMATION Begin -->
          <br>
          <div class="margintop10px marginbottom30px">
            <table class="tableStyle">
              <tbody>
                <tr class="headerstyle2">
                  <td colspan="2"><span class="font20px">General Information</span></td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay Title:</td>
                  <td>{{ assayScreening.assayTitle }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Study Type:</td>
                  <td>{{ assayScreening.assayStudyType }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Test Compound:</td>
                  <td>
                    <div *ngIf="assayScreening.invitroTestCompound">
                      <span *ngIf="assayScreening.invitroTestCompound.testCompound">
                        <span class="colororange fontbold">{{ assayScreening.invitroTestCompound.testCompound }}</span>
                      </span>
                    </div>
                  </td>
                </tr>

                <tr>
                  <td class="fieldKey">Test Compound UNII:</td>
                  <td>
                    <div *ngIf="assayScreening.invitroTestCompound">
                      <div *ngIf="assayScreening.invitroTestCompound._testCompoundSubId; else noTestCompoundSubId">
                        <div class="divflex">
                          <div>
                            <a [routerLink]="['/substances', assayScreening.invitroTestCompound._testCompoundSubId]"
                              target="_blank">
                              <span class="">{{ assayScreening.invitroTestCompound.testCompoundUnii }}</span>
                            </a>
                          </div>
                          <div class="marginleft30px margintopneg10px width30px">
                            <a role="img" aria-label="substance image" class="zoom"
                              (click)="openImageModal(assayScreening.invitroTestCompound._testCompoundSubId)">
                              <img class="image-icon" appSubstanceImage size="90"
                                [entityId]="assayScreening.invitroTestCompound._testCompoundSubId">
                            </a>
                          </div>
                        </div>
                      </div>
                      <ng-template #noTestCompoundSubId>
                        {{ assayScreening.invitroTestCompound.testCompoundUnii }}
                      </ng-template>
                    </div>
                  </td>
                </tr>

                <tr>
                  <td class="fieldKey">Screening Concentration:</td>
                  <td>{{ assayScreening.screeningConcentration }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Screening Concentration Unit:</td>
                  <td>{{ assayScreening.screeningConcentrationUnit }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Percent Inhibition Mean:</td>
                  <td>{{ assayScreening.percentInhibitionMean }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Purity:</td>
                  <td>{{ assayScreening.purity }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Batch ID:</td>
                  <td>{{ assayScreening.batchId }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Test Date:</td>
                  <td>{{ assayScreening.testDate | date: 'MM/dd/yyyy' }}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- Display Assay Details End -->


          <!-- ASSAY Details Begin -->
          <div class="margintop30px marginbottom30px">
            <table class="tableStyle">
              <tbody>
                <tr class="headerstyle2">
                  <td colspan="2"><span class="font20px">Assay Information</span></td>
                </tr>

                <tr>
                  <td class="fieldKey">Relationship Type:</td>
                  <td>
                    <div *ngIf="assayScreening.invitroTestCompound">
                      <div *ngIf="assayScreening.invitroTestCompound.invitroRelationships.length > 0">
                          <div *ngFor="let rel of assayScreening.invitroTestCompound.invitroRelationships">
                            {{rel.relationshipType}}
                          </div>
                      </div>
                    </div>
                  </td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay Type:</td>
                  <td>{{ assayScreening.assayType }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay Target:</td>
                  <td><span class="colororange fontbold">{{ assayScreening.assayTarget }}</span></td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay Target UNII:</td>
                  <td>
                    <div *ngIf="assayTargetSubId; else noAssayTargetSubId">
                      <div class="divflex">
                        <div>
                          <a [routerLink]="['/substances', assayTargetSubId]" target="_blank">
                            <span class="">{{ assayScreening.assayTargetUnii }}</span>
                          </a>
                        </div>
                        <div class="marginleft30px margintopneg10px width30px">
                          <a role="img" aria-label="substance image" class="zoom"
                            (click)="openImageModal(assayTargetSubId)">
                            <img class="image-icon" appSubstanceImage size="90" [entityId]="assayTargetSubId">
                          </a>
                        </div>
                      </div>
                    </div>
                    <ng-template #noAssayTargetSubId>
                      {{ assayScreening.assayTargetUnii }}
                    </ng-template>
                  </td>
                </tr>

                <tr>
                  <td class="fieldKey">Ligand/Substrate:</td>
                  <td><span class="colororange fontbold">{{ assayScreening.ligandSubstrate }}</span></td>
                </tr>

                <tr>
                  <td class="fieldKey">Ligand/Substrate UNII:</td>
                  <td>
                    <div *ngIf="ligandSubId; else noLigandSubId">
                      <div class="divflex">
                        <div>
                          <a [routerLink]="['/substances', ligandSubId]" target="_blank">
                            <span class="">{{ assayScreening.ligandSubstrateUnii }}</span>
                          </a>
                        </div>
                        <div class="marginleft30px margintopneg10px width30px">
                          <a role="img" aria-label="substance image" class="zoom" (click)="openImageModal(ligandSubId)">
                            <img class="image-icon" appSubstanceImage size="90" [entityId]="ligandSubId">
                          </a>
                        </div>
                      </div>
                    </div>
                    <ng-template #noLigandSubId>
                      {{ assayScreening.ligandSubstrateUnii }}
                    </ng-template>
                  </td>
                </tr>

                <tr>
                  <td class="fieldKey">Ligand/Substrate Concentration:</td>
                  <td>{{ assayScreening.ligandSubstrateConcentration }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Ligand/Substrate Concentration Unit:</td>
                  <td>{{ assayScreening.ligandSubstrateConcentrationUnit }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Control:</td>
                  <td><span class="colororange fontbold">{{ assayScreening.control }}</span></td>
                </tr>

                <tr>
                  <td class="fieldKey">Control UNII:</td>
                  <td>
                    <div *ngIf="controlSubId; else noControlSubId">
                      <div class="divflex">
                        <div>
                          <a [routerLink]="['/substances', controlSubId]" target="_blank">
                            <span class="">{{ assayScreening.controlUnii }}</span>
                          </a>
                        </div>
                        <div class="marginleft30px margintopneg10px width30px">
                          <a role="img" aria-label="substance image" class="zoom"
                            (click)="openImageModal(controlSubId)">
                            <img class="image-icon" appSubstanceImage size="90" [entityId]="controlSubId">
                          </a>
                        </div>
                      </div>
                    </div>
                    <ng-template #noControlSubId>
                      {{ assayScreening.controlUnii }}
                    </ng-template>
                  </td>
                </tr>

                <tr>
                  <td class="fieldKey">Control Type:</td>
                  <td>{{ assayScreening.controlType }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Control Value Type:</td>
                  <td>{{ assayScreening.controlValueType }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Control Value Mean:</td>
                  <td>{{ assayScreening.controlValueMean }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Control Value Low:</td>
                  <td>{{ assayScreening.controlValueLow }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Control Value High:</td>
                  <td>{{ assayScreening.controlValueHigh }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Control Value Unit:</td>
                  <td>{{ assayScreening.controlValueUnit }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Test Value Type:</td>
                  <td>{{ assayScreening.testValueType }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Test Value:</td>
                  <td>{{ assayScreening.testValue }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Test Value Unit:</td>
                  <td>{{ assayScreening.testValueUnit }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Presentation Type:</td>
                  <td>{{ assayScreening.presentationType }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Presentation:</td>
                  <td>{{ assayScreening.presentation }}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- Display Assay Details End -->


          <!-- REFERENCES Begin -->
          <div class="margintop30px marginbottom30px">
            <table class="tableStyle">
              <tbody>
                <tr class="headerstyle2">
                  <td colspan="2"><span class="font20px">References</span></td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay Reference Type:</td>
                  <td>{{ assayScreening.assayReferenceType }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay Reference:</td>
                  <td>{{ assayScreening.assayReference }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay External ID:</td>
                  <td>{{ assayScreening.assayExternalId }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay External Source:</td>
                  <td>{{ assayScreening.assayExternalSource }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Assay External Reference:</td>
                  <td>
                    <a href="{{ assayScreening.assayExternalReference }}" target="_blank">
                      {{ assayScreening.assayExternalReference }}
                    </a>
                  </td>
                </tr>

              </tbody>
            </table>
          </div>
          <!-- REFERENCES End -->


          <!-- APPROVER Begin -->
          <div class="margintop30px marginbottom30px" *ngIf="assayScreening.invitroApprovers">
            <table class="tableStyle">
              <tbody>
                <tr class="headerstyle2">
                  <td colspan="2"><span class="font20px">Approver Information</span></td>
                </tr>

                <tr>
                  <td class="fieldKey">Approver Name:</td>
                  <td>{{ assayScreening.invitroApprovers.approverName }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Approver Title:</td>
                  <td>{{ assayScreening.invitroApprovers.approverTitle }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Approver Affiliation:</td>
                  <td>{{ assayScreening.invitroApprovers.approverAffiliation }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Approver Email:</td>
                  <td>{{ assayScreening.invitroApprovers.approverEmail }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Approver Phone Number:</td>
                  <td>{{ assayScreening.invitroApprovers.approverPhoneNumber }}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- APPROVER End -->


          <!-- LABORATORY Begin -->
          <div class="margintop30px marginbottom30px" *ngIf="assayScreening.invitroLaboratories">
            <table class="tableStyle">
              <tbody>
                <tr class="headerstyle2">
                  <td colspan="2"><span class="font20px">Laboratory Information</span></td>
                </tr>

                <tr>
                  <td class="fieldKey">Laboratory Name:</td>
                  <td>{{ assayScreening.invitroLaboratories.laboratoryName }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Laboratory Type:</td>
                  <td>{{ assayScreening.invitroLaboratories.laboratoryType }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Laboratory Affiliation:</td>
                  <td>{{ assayScreening.invitroLaboratories.laboratoryAffiliation }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Laboratory Address:</td>
                  <td>{{ assayScreening.invitroLaboratories.laboratoryAddress }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">City:</td>
                  <td>{{ assayScreening.invitroLaboratories.laboratoryCity }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">State:</td>
                  <td>{{ assayScreening.invitroLaboratories.laboratoryState }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Zipcode:</td>
                  <td>{{ assayScreening.invitroLaboratories.laboratoryZipcode }}</td>
                </tr>

                <tr>
                  <td class="fieldKey">Country:</td>
                  <td>{{ assayScreening.invitroLaboratories.laboratoryCountry }}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- LABORATORY End -->

        </mat-card-content>
      </mat-card>

    </div>
    <br><br><br><br>
  </div>
  <ng-template #noRecord>
    <br><br><br><br>
    <div class="colororange padtop50px padleft50px">There is no Assay Screening Data found.</div>
  </ng-template>

</div>